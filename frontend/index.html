<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CV Parser & ATS Scorer</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="stylesheet" href="assets/tailwind.css" onerror="(function(){var s=document.createElement('script');s.src='https://cdn.tailwindcss.com';document.head.appendChild(s)})()" />
    <script>
      // Enhanced fallback: ensure Tailwind CSS loads
      (function(){
        // Check if Tailwind is loaded by testing a utility class
        var test = document.createElement('div');
        test.className = 'hidden';
        document.head.appendChild(test);
        var isTailwindLoaded = (getComputedStyle(test).display === 'none');
        test.remove();
        
        // If Tailwind is not loaded, inject CDN version
        if(!isTailwindLoaded){
          console.log('Tailwind CSS not loaded, injecting CDN version');
          var s = document.createElement('script');
          s.src = 'https://cdn.tailwindcss.com';
          s.onload = function() {
            console.log('Tailwind CSS CDN loaded successfully');
          };
          s.onerror = function() {
            console.error('Failed to load Tailwind CSS CDN');
          };
          document.head.appendChild(s);
        } else {
          console.log('Tailwind CSS already loaded');
        }
      })();
    </script>
    <style>
        .drop-zone {
            transition: all 0.3s ease;
        }
        .drop-zone.dragover {
            border-color: #3B82F6;
            background-color: #EFF6FF;
        }
        .score-gauge {
            background: conic-gradient(from 0deg, #EF4444 0deg, #F59E0B 72deg, #10B981 144deg, #3B82F6 216deg, #8B5CF6 288deg, #EF4444 360deg);
        }
        .loading-spinner {
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center">
                    <div class="w-8 h-8 bg-primary rounded-lg flex items-center justify-center mr-3">
                        <svg width="20" height="20" class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                    </div>
                    <h1 class="text-xl font-bold text-gray-900">CV Parser & ATS Scorer</h1>
                </div>
                <div class="text-sm text-gray-500">
                    Powered by AI
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Upload Section -->
        <div id="upload-section" class="bg-white rounded-lg shadow-sm border p-6 mb-8">
            <div class="text-center mb-6">
                <h2 class="text-2xl font-bold text-gray-900 mb-2">Upload Your Resume</h2>
                <p class="text-gray-600">Get instant ATS scoring and optimization suggestions</p>
            </div>

            <!-- Industry Selector -->
            <div class="mb-4">
                <label for="industry-select" class="block text-sm font-medium text-gray-700 mb-1">Target Industry</label>
                <select id="industry-select" class="w-full border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary">
                    <option value="technology">Technology</option>
                    <option value="marketing">Marketing</option>
                    <option value="finance">Finance</option>
                    <option value="product">Product</option>
                    <option value="healthcare">Healthcare</option>
                    <option value="sales">Sales</option>
                    <option value="hr">HR</option>
                    <option value="operations">Operations</option>
                    <option value="design">Design</option>
                </select>
            </div>

            <!-- File Upload Area -->
            <div id="drop-zone" class="drop-zone border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-primary hover:bg-gray-50 transition-colors">
                <div class="space-y-4">
                    <div class="mx-auto w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center">
                        <svg width="32" height="32" class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                        </svg>
                    </div>
                    <div>
                        <p class="text-lg font-medium text-gray-900">Drop your resume here</p>
                        <p class="text-sm text-gray-500">or click to browse</p>
                    </div>
                    <div class="text-xs text-gray-400">
                        Supports PDF, DOCX, and TXT files (max 10MB)
                    </div>
                </div>
                <input type="file" id="file-input" class="hidden" accept=".pdf,.docx,.txt">
            </div>

            <!-- Progress Bar -->
            <div id="progress-container" class="hidden mt-6">
                <div class="flex items-center justify-between mb-2">
                    <span class="text-sm font-medium text-gray-700">Processing...</span>
                    <span id="progress-text" class="text-sm text-gray-500">0%</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                    <div id="progress-bar" class="bg-primary h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <!-- Results Section -->
        <div id="results-section" class="hidden space-y-6">
            <!-- ATS Score Card -->
            <div class="bg-white rounded-lg shadow-sm border p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-gray-900">ATS Score</h3>
                    <div id="score-badge" class="px-3 py-1 rounded-full text-sm font-medium"></div>
                </div>
                
                <div class="flex items-center justify-center mb-6">
                    <div class="relative">
                        <div id="score-gauge" class="w-32 h-32 rounded-full score-gauge flex items-center justify-center">
                            <div class="w-24 h-24 bg-white rounded-full flex items-center justify-center">
                                <span id="score-value" class="text-2xl font-bold text-gray-900">0</span>
                            </div>
                        </div>
                        <div class="absolute inset-0 rounded-full score-gauge opacity-20"></div>
                    </div>
                </div>

                <!-- Score Breakdown -->
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div id="contact-score" class="text-center p-3 bg-gray-50 rounded-lg">
                        <div class="text-sm text-gray-600">Contact Info</div>
                        <div class="text-lg font-semibold text-gray-900">0/15</div>
                    </div>
                    <div id="skills-score" class="text-center p-3 bg-gray-50 rounded-lg">
                        <div class="text-sm text-gray-600">Skills</div>
                        <div class="text-lg font-semibold text-gray-900">0/25</div>
                    </div>
                    <div id="education-score" class="text-center p-3 bg-gray-50 rounded-lg">
                        <div class="text-sm text-gray-600">Education</div>
                        <div class="text-lg font-semibold text-gray-900">0/10</div>
                    </div>
                    <div id="experience-score" class="text-center p-3 bg-gray-50 rounded-lg">
                        <div class="text-sm text-gray-600">Experience</div>
                        <div class="text-lg font-semibold text-gray-900">0/20</div>
                    </div>
                    <div id="structure-score" class="text-center p-3 bg-gray-50 rounded-lg">
                        <div class="text-sm text-gray-600">Structure</div>
                        <div class="text-lg font-semibold text-gray-900">0/15</div>
                    </div>
                    <div id="readability-score" class="text-center p-3 bg-gray-50 rounded-lg">
                        <div class="text-sm text-gray-600">Readability</div>
                        <div class="text-lg font-semibold text-gray-900">0/15</div>
                    </div>
                </div>
            </div>

            <!-- Advanced ATS Card -->
            <div id="advanced-card" class="hidden bg-white rounded-lg shadow-sm border p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-gray-900">Advanced ATS Analysis</h3>
                    <div id="advanced-score-badge" class="px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800">--</div>
                </div>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4 mb-4">
                    <div class="p-3 bg-gray-50 rounded-lg text-center">
                        <div class="text-sm text-gray-600">Advanced Score</div>
                        <div id="advanced-score" class="text-xl font-semibold text-gray-900">--</div>
                    </div>
                    <div class="p-3 bg-gray-50 rounded-lg text-center">
                        <div class="text-sm text-gray-600">General Keywords</div>
                        <div id="adv-gen-pct" class="text-lg font-semibold text-gray-900">--%</div>
                    </div>
                    <div class="p-3 bg-gray-50 rounded-lg text-center">
                        <div class="text-sm text-gray-600">Industry Keywords</div>
                        <div id="adv-ind-pct" class="text-lg font-semibold text-gray-900">--%</div>
                    </div>
                    <div class="p-3 bg-gray-50 rounded-lg text-center">
                        <div class="text-sm text-gray-600">Action Verbs</div>
                        <div id="adv-action-count" class="text-lg font-semibold text-gray-900">--</div>
                    </div>
                    <div class="p-3 bg-gray-50 rounded-lg text-center">
                        <div class="text-sm text-gray-600">Quantification</div>
                        <div id="adv-quant-count" class="text-lg font-semibold text-gray-900">--</div>
                    </div>
                    <div class="p-3 bg-gray-50 rounded-lg text-center">
                        <div class="text-sm text-gray-600">Grammar / Weak</div>
                        <div class="text-lg font-semibold text-gray-900"><span id="adv-grammar-count">--</span> / <span id="adv-weak-count">--</span></div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-medium text-gray-900 mb-2">Top Missing General Keywords</h4>
                        <div id="adv-missing-general" class="flex flex-wrap gap-2"></div>
                    </div>
                    <div>
                        <h4 class="font-medium text-gray-900 mb-2">Top Missing Industry Keywords</h4>
                        <div id="adv-missing-industry" class="flex flex-wrap gap-2"></div>
                    </div>
                </div>

                <div class="mt-6">
                    <h4 class="font-medium text-gray-900 mb-2">Issues & Suggestions</h4>
                    <div id="adv-issues-list" class="space-y-3"></div>
                </div>
            </div>

            <!-- Issues Card -->
            <div id="issues-card" class="bg-white rounded-lg shadow-sm border p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Issues Found</h3>
                <div id="issues-list" class="space-y-3">
                    <!-- Issues will be populated here -->
                </div>
            </div>

            <!-- Parsed Data Card -->
            <div id="parsed-data-card" class="bg-white rounded-lg shadow-sm border p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Parsed Information</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-medium text-gray-900 mb-3">Contact Information</h4>
                        <div id="contact-info" class="space-y-2 text-sm">
                            <!-- Contact info will be populated here -->
                        </div>
                    </div>
                    <div>
                        <h4 class="font-medium text-gray-900 mb-3">Skills</h4>
                        <div id="skills-list" class="flex flex-wrap gap-2">
                            <!-- Skills will be populated here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- CTA Card -->
            <div class="bg-gradient-to-r from-primary to-blue-600 rounded-lg p-6 text-white text-center">
                <h3 class="text-xl font-bold mb-2">Ready to optimize your resume?</h3>
                <p class="text-blue-100 mb-4">Get AI-powered suggestions to improve your ATS score</p>
                <!-- Optimize Button -->
                <div class="text-center">
                    <button id="optimize-btn" class="bg-white text-primary px-6 py-3 rounded-lg font-semibold hover:bg-gray-50 transition-colors">
                        Fix my resume with AI
                    </button>
                    
                    <!-- Test button for debugging -->
                    <button onclick="testOptimizeClick()" class="ml-4 bg-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-purple-700 transition-colors">
                        🧪 Test AI Improvement
                    </button>
                    
                    <!-- Data check button -->
                    <button onclick="checkData()" class="ml-4 bg-yellow-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-yellow-700 transition-colors">
                        📊 Check Data
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <div class="text-center text-sm text-gray-500">
                <p>&copy; 2024 CV Parser & ATS Scorer. Powered by AI technology.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
</body>
</html>
